//- Data to be rendered in the email template
//- + studentName: Name of the student receiving the notification
//- + groupName: Name of the group
//- + groupCode: Code of the group
//- + milestoneName: Name of the milestone
//- + reviewerName: Name of the reviewer
//- + reviewSubmittedAt: Date and time when the review was submitted
//- + feedback: Feedback provided by the reviewer
//- + reviewItems: Array of review items with checklist item names, acceptance status, and notes

extends layouts/email-layout

block content
  .greeting
    | Dear #{studentName},

  p Your group's submission has been reviewed by #{reviewerName}.

  .info-box
    h3 ðŸ“ Submission Details
    .info-item
      span.info-label Group:
      span.info-value #{groupName} (#{groupCode})
    .info-item
      span.info-label Milestone:
      span.info-value #{milestoneName}
    .info-item
      span.info-label Reviewer:
      span.info-value #{reviewerName}
    .info-item
      span.info-label Submitted At:
      span.info-value #{reviewSubmittedAt}

  if feedback
    .info-box
      h3 ðŸ’¬ Reviewer Feedback
      p #{feedback}

  if reviewItems && reviewItems.length > 0
    .info-box
      h3 ðŸ“‹ Review Items
      each item in reviewItems
        .review-item(style="margin-bottom: 15px; padding: 10px; border-left: 3px solid #667eea; background-color: #f8f9fa;")
          .info-item
            span.info-label #{item.checklistItemName}:
            span.info-value(class=`acceptance-${item.acceptance.toLowerCase()}` style=`color: ${item.acceptance === 'ACCEPTED' ? '#28a745' : item.acceptance === 'REJECTED' ? '#dc3545' : '#ffc107'}; font-weight: bold;`) #{item.acceptance}
          if item.note
            p.item-note(style="margin: 5px 0 0 0; font-style: italic; color: #6c757d;")
              | Note: #{item.note}

  .success-box
    h3 ðŸ“š Next Steps
    p Please review the feedback and take the following actions:
    ul
      li Log in to TheSync system to view the complete review
      li Address any feedback or concerns raised by the reviewer
      li Prepare for the next milestone if applicable
      li Contact your supervisor if you need clarification

  p If you have any questions about the review, please contact your supervisor or the academic administration.
